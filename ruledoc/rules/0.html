<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-AU" lang="en-AU">
	<head>
		<!-- u4411120 2/07/2010 -->
		<title>RuleDoc - AcceptEventAction-AndIgnore</title>
		<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<link rel="stylesheet" type="text/css" href="../styles/rules.css" media="screen" />
		<style type="text/css" id="pageStyles">
		</style>
	</head>
	<body>
		<div id="heading">
			<h1>
				AcceptEventAction-AndIgnore
			</h1>
		</div>
		<div id="menu">
			<ul>
				<li>
					<a href="../index.html">Up to Index</a>
				</li>
				<li>
					<a href="1.html">Next</a>
				</li>
			</ul>
		</div>
		<div id="content">
			<div id="middlecolumn">
				<h2>
					US Section 11.3.2 AcceptEventAction
				</h2>
				<p>
					To see the rule description in the US pdf document,
					<a href="../../UML_Superstructure_2-1-2_07-11-02.pdf#page=251">
						click here
					</a>.
				</p>
				<a href="../../GraphOutputs/acceptEventAction-AndIgnore.dot.png">
					<img 
						src="../../GraphOutputs/acceptEventAction-AndIgnore.dot.png"
						alt="The dot-generated rule image"
						title="Click to see the full-size version"
					/>
				</a>
				<h2>
					Context
				</h2>
				<p>
					Below is the xml file which defines the order in which the rules are executed. 
				</p>
					<iframe src="../../GTSRulesSeq.xml" width="100%">
						Your browser does not support frames. 
						<a href="../../GTSRulesSeq.xml" title="View the xml rule sequence file">
							Click here
						</a> to see the file.
					</iframe>
				<h2>
					Rationale and Comments
				</h2>
				<p>AcceptEventAction is 'an action that waits for the occurrence of an event meeting
					a specified condition'. The Action has a Trigger (the event) and a Result (an
					output pin that holds the accepted event).
				</p>
				<p>This variation is the first option considered when the action is called, as part of
					an exclusive dependency, which acts as a set of if-conditions. It will be
					applied if the instance is not in a state for which the received event is a
					trigger, or alternatively not in active state at all. 
					The result is that the event is ignored.
				</p>
				<p>
					In response to <a href="http://code.google.com/p/graf-framework/issues/detail?id=7">Issue 7</a>,
					the following solution was implemented:
				</p>
				<div class="extract">
				acceptEventAction-AndIgnore was the problem. The NAC did fit onto the graph, but the NAC didn't stop the execution because other parallel parts of the graph were also available. See the new image attached.
				<img src="../../GraphOutputs/issue7version2.png" />
				<br />AGG will only apply the NAC once, even if it fits in multiple places.
				<br />AGG needs a whole new NAC on each of the multiple fits for it to stop execution.
				<br />This is very bad for us because we want the rule to not execute if the NAC fits ANYWHERE not if it fits EVERYWHERE.
				<br/ >I've solved the problem, but the solution is massively inelegant. I added 2 more versions of acceptEventAction-AndIgnore. These 3 rules go in a new action. The 2 new rules are like the original but they have duplicate event-trigger-source branches. See attachment. This is very undesirable because it only works if there's 1, 2 or 3 transitions going out of 1 state. If there were 4 then we'd need to add another rule.
				<br />The model now works fine, but I'm keeping this issue open because we need to find a better solution.
				</div>
				<p>
					The additional rules are the following:
				</p>
				<ul>
					<li><a href="../../GraphOutputs/acceptEventAction-AndIgnore-TwoTriggers.dot.png">acceptEventAction-AndIgnore-TwoTriggers</a></li>
					<li><a href="../../GraphOutputs/acceptEventAction-AndIgnore-ThreeTriggers.dot.png">acceptEventAction-AndIgnore-ThreeTriggers</a></li>
				</ul>
			</div>
		</div>
	</body>
</html>